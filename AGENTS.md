All changes must keep the console, GUI and web versions feature compatible. Shared logic should live in `core.py` and be used by the interfaces.

Before committing, run `python -m unittest` to ensure tests pass.
